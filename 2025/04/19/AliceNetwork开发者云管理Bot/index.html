<!DOCTYPE html>
<html lang="zh">
  <head>
    <!-- base -->
<meta charset="UTF-8" />
<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="template" content="Old-Fasion-Theme" />

<!-- sitemap -->
<link
    rel="sitemap"
    type="application/xml"
    title="sitemap"
    href="/sitemap.xml" />

<!-- title -->
<title>
    AliceNetwork开发者云管理Bot | Runoneall
</title>

<!-- css dependencies -->

<link rel="stylesheet" href="/css/normalize.css">
<link rel="stylesheet" href="/css/grid.css">
<link rel="stylesheet" href="/css/highlight.css">
<link rel="stylesheet" href="/css/global.css">
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/sidebar.css">
<link rel="stylesheet" href="/css/post.css">
<link rel="stylesheet" href="/css/misc.css">
<link rel="stylesheet" href="/css/page.css">
<link rel="stylesheet" href="/css/footer.css">
<link rel="stylesheet" href="/css/dark.css" id="dark-style" disabled>


<!-- favicon -->
<link rel="shortcut icon" href="https://dev.oneall.eu.org/favicon.webp">

<!-- extra css -->


<!-- keywords -->

<meta name="keywords" content="Hexo,Blog,Runoneall" />

<!-- description -->

<meta name="description" content="云湖机器人（需下载云湖APP） 效果图： 直接体验：https://yhfx.jwznb.com/share?key=YZInMjHRY6c2&amp;ts=1745027189 部署（需python3.12） 依赖包： blinker==1.9.0 certifi==2025.1.31 charset-normalizer==3.4.1 click==8.1.8 filetype==1.2.0" />

<!-- rss -->
<link rel="alternate" href="/rss2.xml" title="RSS 2.0" type="application/application/rss+xml+xml">
<link rel="alternate" href="/atom.xml" title="ATOM 1.0" type="application/application/atom+xml+xml">
  <meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Runoneall" type="application/atom+xml">
<link rel="alternate" href="/rss2.xml" title="Runoneall" type="application/rss+xml">
</head>

  <body>
    <div id="outbox">
      <!-- header -->
      <div id="header" class="clearfix">
        <div class="container">
          <div class="row">
            <div class="site-name">
              <a id="logo" href="/">Runoneall</a>
              <p id="description_random_intro" class="description">
                Runoneall's Blog
              </p>
              <script>
                var description_random_intro = document.getElementById(
                  "description_random_intro"
                );
                var descriptions = JSON.parse(
                  `["路漫漫其修远兮，吾将上下而求索","天将降大任于是人也，必先苦其心志，劳其筋骨，饿其体肤，空乏其身，行拂乱其所为","惜秦皇汉武，略输文采；唐宗宋祖，稍逊风骚。俱往矣，数风流人物，还看今朝。"]`
                );
                var random_intro =
                  descriptions[Math.floor(Math.random() * descriptions.length)];
                description_random_intro.innerHTML = random_intro;
              </script>
            </div>
          </div>
        </div>
      </div>
      <!-- end header -->

      <!-- sidebar button -->
      <button id="side-btn" onclick="changeSideStatus()">
        <input id="side-flag" type="checkbox" />
        <label id="side-control" for="side-flag">≡</label>
      </button>

      <!-- left area -->
      <div id="left">
        <!-- left links -->
        <div id="left-links">
          <!-- page links -->
          <a
            class=""
            href="/"
            >首页</a
          >
          
          <br />
          <a
            class=""
            href="/links/index.html"
            >链接</a
          >
          
          <br />
          <a
            class=""
            href="/about/index.html"
            >关于</a
          >
          
          <!-- end page links -->

          <!-- sidebar extra html -->
          
          <br />
          <a href="/rss2.xml">RSS</a><br>
<a href="mailto:dev@oneall.eu.org">Email</a><br> 
          <!-- end sidebar extra html -->

          <br /><button id="dark-btn" onclick="changeDarkMode()">
            更换主题
          </button>
        </div>
        <hr />
        <!-- end left links -->

        <!-- search -->
        <form id="search" method="get" action="#" role="search">
          <input
            type="text"
            id="s"
            name="s"
            class="text"
            placeholder="输入关键字搜索"
          />
          <button type="submit" class="submit">
            <img
              src="/img/icon-search.png"
              alt="icon-search"
            />
          </button>
        </form>
        <!-- end search -->
      </div>
      <!-- end left area -->

      <!-- right area -->
      <div id="right">
        <div class="row"><div class="col-mb-12 col-8" id="main" role="main">

    <!-- article body -->
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

        <!-- post title -->
        <h1 class="post-title" itemprop="name headline">
            <a itemprop="url" href="/2025/04/19/AliceNetwork%E5%BC%80%E5%8F%91%E8%80%85%E4%BA%91%E7%AE%A1%E7%90%86Bot/">AliceNetwork开发者云管理Bot</a>
        </h1>
        <!-- end post title -->

        <!-- post meta -->
        <ul class="post-meta">
            <li itemprop="author" itemscope itemtype="http://schema.org/Person">
                作者: <a itemprop="name" href="#" rel="author">Tom Brown</a>
            </li>
            <li>时间:
                <time itemprop="datePublished"
                    datetime="2025-04-19T05:46:03.000Z">2025-04-19</time>
            </li>
            
            <li>分类:
                
                <a href="/categories/%E9%BB%98%E8%AE%A4/">
                    默认
                </a>&nbsp;
                
            </li>
            
        </ul>
        <!-- end post meta -->

        <!-- post content -->
        <div class="post-content" itemprop="articleBody">
            <p>云湖机器人（需下载云湖APP）</p>
<p>效果图：<br><img src="https://s.rmimg.com/2025-04-19/1745027138-305955-2025-04-19-093942.png"><br><img src="https://s.rmimg.com/2025-04-19/1745027141-233577-2025-04-19-094122.png"><br><img src="https://s.rmimg.com/2025-04-19/1745027143-928952-2025-04-19-094225.png"></p>
<p>直接体验：<br><a target="_blank" rel="noopener" href="https://yhfx.jwznb.com/share?key=YZInMjHRY6c2&ts=1745027189">https://yhfx.jwznb.com/share?key=YZInMjHRY6c2&amp;ts=1745027189</a></p>
<p>部署（需python3.12）</p>
<p>依赖包：</p>
<pre><code class="language-plaintext">blinker==1.9.0
certifi==2025.1.31
charset-normalizer==3.4.1
click==8.1.8
filetype==1.2.0
Flask==3.1.0
idna==3.10
itsdangerous==2.2.0
Jinja2==3.1.6
MarkupSafe==3.0.2
requests==2.32.3
urllib3==2.4.0
Werkzeug==3.1.3
</code></pre>
<p>部署sdkFrame</p>
<pre><code class="language-shell">git clone https://github.com/runoneall/sdkFrame.git
python3 -m sdkFrame -add-origin https://dev.oneall.eu.org/ryhsdk2/map.json -update-origin -set-env YUNHU_TOKEN=云湖机器人token -set-env &#39;SERVER=json:&#123;   1 ↵
    &quot;host&quot;: &quot;0.0.0.0&quot;,
    &quot;port&quot;: 端口,
    &quot;debug&quot;: true,
    &quot;threaded&quot;: true
  &#125;&#39;
python3 -m sdkFrame -install-module SendMessage@r1a-ryhsdk2
python3 -m sdkFrame -install-module ServCommand@r1a-ryhsdk2 -install-module ServShortCut@r1a-ryhsdk2
</code></pre>
<p><code>AliceAPI.py</code></p>
<pre><code class="language-python">import requests


class EphemeraAPI:
    def __init__(self, api_token):
        self.EVO_API_BASE = &quot;https://app.alice.ws/cli/v1/Evo/&quot;
        self.api_header = &#123;&quot;KP-APIToken&quot;: api_token&#125;

    def EvoJob(self, job_name):
        return self.EVO_API_BASE + job_name

    def InstanceList(self):
        resp = requests.get(self.EvoJob(&quot;Instance&quot;), headers=self.api_header).json()
        if resp[&quot;status&quot;] != 200:
            return None
        return resp[&quot;data&quot;]

    def PlanList(self):
        resp = requests.get(self.EvoJob(&quot;Plan&quot;), headers=self.api_header).json()
        if resp[&quot;status&quot;] != 200:
            return None
        PlanMap = &#123;&#125;
        for plan in resp[&quot;data&quot;]:
            PlanMap[plan[&quot;name&quot;]] = plan[&quot;id&quot;]
        return PlanMap

    def PlanOsList(self, plan_id):
        resp = requests.post(
            self.EvoJob(&quot;PlanToOS&quot;),
            headers=self.api_header,
            data=&#123;&quot;plan_id&quot;: str(plan_id)&#125;,
        ).json()
        if resp[&quot;status&quot;] != 200:
            return None
        OSMap = &#123;&#125;
        for _, osGroup in resp[&quot;data&quot;].items():
            for osItem in osGroup[&quot;os&quot;]:
                OSMap[osItem[&quot;name&quot;]] = osItem[&quot;id&quot;]
        return OSMap

    def InstanceDeploy(self, plan_id, os_id, hours):
        resp = requests.post(
            self.EvoJob(&quot;Deploy&quot;),
            headers=self.api_header,
            data=&#123;&quot;product_id&quot;: str(plan_id), &quot;os_id&quot;: str(os_id), &quot;time&quot;: str(hours)&#125;,
        ).json()
        if resp[&quot;status&quot;] != 200:
            return None
        return resp[&quot;data&quot;]

    def InstanceDestroy(self, instance_id):
        resp = requests.post(
            self.EvoJob(&quot;Destroy&quot;),
            headers=self.api_header,
            data=&#123;&quot;id&quot;: str(instance_id)&#125;,
        ).json()
        if resp[&quot;status&quot;] != 200:
            return False
        return True

    def InstancePower(self, instance_id, action):
        resp = requests.post(
            self.EvoJob(&quot;Power&quot;),
            headers=self.api_header,
            data=&#123;&quot;id&quot;: str(instance_id), &quot;action&quot;: str(action)&#125;,
        ).json()
        if resp[&quot;status&quot;] != 200:
            return False
        return True

    def InstanceRebuild(self, instance_id, os_id):
        resp = requests.post(
            self.EvoJob(&quot;Rebuild&quot;),
            headers=self.api_header,
            data=&#123;&quot;id&quot;: str(instance_id), &quot;os&quot;: str(os_id)&#125;,
        ).json()
        if resp[&quot;status&quot;] != 200:
            return False
        return resp[&quot;data&quot;]

    def InstanceRenewal(self, instance_id, hours):
        resp = requests.post(
            self.EvoJob(&quot;Renewal&quot;),
            headers=self.api_header,
            data=&#123;&quot;id&quot;: str(instance_id), &quot;time&quot;: str(hours)&#125;,
        ).json()
        if resp[&quot;status&quot;] != 200:
            return False
        return True
</code></pre>
<p>到 <a target="_blank" rel="noopener" href="https://www.yhchat.com/control">https://www.yhchat.com/control</a> 创建机器人</p>
<p>快捷菜单设置（全部为普通按钮，事件推送）<br>名称随意，记录菜单id<br><img src="https://s.rmimg.com/2025-04-19/1745028339-727178-2025-04-19-100458.png"></p>
<p>指令列表<br>添加一个普通指令和一个自定义输入指令，名称随意，记录id<br><img src="https://s.rmimg.com/2025-04-19/1745028453-377258-2025-04-19-100639.png"></p>
<p>自定义输入表单（名称随意，记录id）<br><img src="https://s.rmimg.com/2025-04-19/1745028539-43368-2025-04-19-100819.png"></p>
<pre><code class="language-plaintext">Plan选项
LAX.Evo.Micro#LAX.Evo.Standard#LAX.Evo.Pro#LAX.Evo.Ultra

OS选项
Debian 12 (Bookworm) Minimal#Debian 11 (Bullseye) Minimal#Debian 12 DevKit#Ubuntu Server 20.04 LTS Minimal#Ubuntu Server 22.04 LTS Minimal#CentOS 7 Minimal#CentOS Stream 9 Minimal#AlmaLinux 8 Minimal#AlmaLinux 9 Latest#Alpine Linux 3.19
</code></pre>
<p><code>app.py</code></p>
<pre><code class="language-python">import json
import os
import sdkFrame
import AliceAPI

sdk = sdkFrame.init()

if not os.path.exists(&quot;db.json&quot;):
    with open(&quot;db.json&quot;, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f:
        f.write(&quot;&#123;&#125;&quot;)


def ReadDB():
    with open(&quot;db.json&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:
        return json.load(f)


def WriteDB(data_dict):
    with open(&quot;db.json&quot;, &quot;w&quot;, encoding=&quot;utf-8&quot;) as f:
        json.dump(data_dict, fp=f, indent=2, ensure_ascii=True)


def SetToken(data):
    event = data[&quot;event&quot;]
    if event[&quot;chat&quot;][&quot;chatType&quot;] == &quot;bot&quot;:
        uid = event[&quot;sender&quot;][&quot;senderId&quot;]
        token = event[&quot;message&quot;][&quot;content&quot;][&quot;text&quot;]
        WriteDB(&#123;**ReadDB(), **&#123;uid: &#123;&quot;token&quot;: token&#125;&#125;&#125;)
        sdk.SendMessage.Text(uid, &quot;user&quot;, f&quot;Set &#123;uid&#125; Token &#123;token&#125;&quot;)


def InstanceConfig(data):
    event = data[&quot;event&quot;]
    if event[&quot;chat&quot;][&quot;chatType&quot;] == &quot;bot&quot;:
        uid = event[&quot;sender&quot;][&quot;senderId&quot;]
        formJson = event[&quot;message&quot;][&quot;content&quot;][&quot;formJson&quot;]
        target_plan = formJson[&quot;Plan 选择框表单ID&quot;][&quot;selectValue&quot;]
        target_os = formJson[&quot;OS 选择框表单ID&quot;][&quot;selectValue&quot;]
        target_hours = formJson[&quot;Hours 输入框表单ID&quot;][&quot;value&quot;]

        db = ReadDB()
        if uid in db and &quot;token&quot; in db[uid]:
            db[uid][&quot;plan&quot;] = target_plan
            db[uid][&quot;os&quot;] = target_os
            db[uid][&quot;hours&quot;] = target_hours
            WriteDB(db)
            sdk.SendMessage.Text(
                uid,
                &quot;user&quot;,
                f&quot;&quot;&quot;Default Config:
- Plan: &#123;target_plan&#125;
- OS: &#123;target_os&#125;
- Hours: &#123;target_hours&#125;&quot;&quot;&quot;,
            )
        else:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;Set Token First&quot;)


def InstanceInfo(data):
    event = data[&quot;event&quot;]
    if event[&quot;senderType&quot;] == &quot;user&quot;:

        db = ReadDB()
        uid = event[&quot;senderId&quot;]

        if uid not in db or &quot;token&quot; not in db[uid]:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;Set Token First&quot;)
            return

        if &quot;instance_id&quot; not in db[uid]:
            db[uid][&quot;instance_id&quot;] = &quot;&quot;

        if db[uid][&quot;instance_id&quot;] == &quot;&quot;:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;No Instance Deployed&quot;)
            return

        instance_id = db[uid][&quot;instance_id&quot;]
        sdk.SendMessage.Text(uid, &quot;user&quot;, f&quot;Checking Instance &#123;instance_id&#125;...&quot;)
        resp = AliceAPI.EphemeraAPI(db[uid][&quot;token&quot;]).InstanceList()

        if resp == None:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;Check Failed&quot;)
            return

        for instance in resp:
            if str(instance[&quot;id&quot;]) == instance_id:
                sdk.SendMessage.Text(
                    uid,
                    &quot;user&quot;,
                    f&quot;&quot;&quot;Server &#123;instance_id&#125;:
- Ipv4: &#123;instance[&quot;ipv4&quot;]&#125;
- Ipv6: &#123;instance[&quot;ipv6&quot;]&#125;
- Hostname: &#123;instance[&quot;hostname&quot;]&#125;
- Cpu Total: &#123;instance[&quot;cpu&quot;]&#125; Core
- Cpu Type: &#123;instance[&quot;cpu_name&quot;]&#125;
- Memory Total: &#123;instance[&quot;memory&quot;]&#125; MB
- Disk Total: &#123;instance[&quot;disk&quot;]&#125; GB
- Disk Type: &#123;instance[&quot;disk_type&quot;]&#125;
- User: &#123;instance[&quot;user&quot;]&#125;
- Password: &#123;instance[&quot;password&quot;]&#125;
- Status: &#123;instance[&quot;status&quot;]&#125;
- Created At: &#123;instance[&quot;creation_at&quot;]&#125;
- Expired At: &#123;instance[&quot;expiration_at&quot;]&#125;
- Plan: &#123;instance[&quot;plan&quot;]&#125;
- Region: &#123;instance[&quot;region&quot;]&#125;
- OS: &#123;instance[&quot;os&quot;]&#125;&quot;&quot;&quot;,
                )
                break


def InstanceDeploy(data):
    event = data[&quot;event&quot;]
    if event[&quot;senderType&quot;] == &quot;user&quot;:

        db = ReadDB()
        uid = event[&quot;senderId&quot;]

        if uid not in db or &quot;token&quot; not in db[uid]:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;Set Token First&quot;)
            return

        if &quot;plan&quot; not in db[uid] or &quot;os&quot; not in db[uid] or &quot;hours&quot; not in db[uid]:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;Set Default Config First&quot;)
            return

        if &quot;instance_id&quot; in db[uid] and db[uid][&quot;instance_id&quot;] != &quot;&quot;:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;Instance Already Deployed&quot;)
            return

        sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;Deploying Instance...&quot;)
        target_plan = db[uid][&quot;plan&quot;]
        target_os = db[uid][&quot;os&quot;]
        target_hours = db[uid][&quot;hours&quot;]

        Ephemera = AliceAPI.EphemeraAPI(db[uid][&quot;token&quot;])
        plans = Ephemera.PlanList()
        oss = Ephemera.PlanOsList(plans[target_plan])
        resp = Ephemera.InstanceDeploy(
            Ephemera.PlanList()[target_plan], oss[target_os], hours=int(target_hours)
        )

        if resp == None:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;Deploy Failed&quot;)
            return

        db[uid][&quot;instance_id&quot;] = str(resp[&quot;id&quot;])
        WriteDB(db)
        sdk.SendMessage.Text(
            uid,
            &quot;user&quot;,
            f&quot;Instance &#123;resp[&#39;id&#39;]&#125; Deployed, Please Wait for 2-3 minutes, Use Info Button to Check Status&quot;,
        )


def InstanceDestroy(data):
    event = data[&quot;event&quot;]
    if event[&quot;senderType&quot;] == &quot;user&quot;:

        db = ReadDB()
        uid = event[&quot;senderId&quot;]

        if uid not in db or &quot;token&quot; not in db[uid]:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;Set Token First&quot;)
            return

        if &quot;instance_id&quot; not in db[uid] or db[uid][&quot;instance_id&quot;] == &quot;&quot;:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;No Instance Deployed&quot;)
            return

        instance_id = db[uid][&quot;instance_id&quot;]
        sdk.SendMessage.Text(uid, &quot;user&quot;, f&quot;Destroying Instance &#123;instance_id&#125;...&quot;)

        resp = AliceAPI.EphemeraAPI(db[uid][&quot;token&quot;]).InstanceDestroy(instance_id)
        if resp == False:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;Destroy Failed&quot;)
            return

        del db[uid][&quot;instance_id&quot;]
        WriteDB(db)
        sdk.SendMessage.Text(uid, &quot;user&quot;, f&quot;Instance &#123;instance_id&#125; Destroyed&quot;)


def power_action(data, action):
    event = data[&quot;event&quot;]
    if event[&quot;senderType&quot;] == &quot;user&quot;:

        db = ReadDB()
        uid = event[&quot;senderId&quot;]

        if uid not in db or &quot;token&quot; not in db[uid]:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;Set Token First&quot;)
            return

        if &quot;instance_id&quot; not in db[uid] or db[uid][&quot;instance_id&quot;] == &quot;&quot;:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;No Instance Deployed&quot;)
            return

        instance_id = db[uid][&quot;instance_id&quot;]
        sdk.SendMessage.Text(
            uid, &quot;user&quot;, f&quot;Performing &#123;action&#125; on Instance &#123;instance_id&#125;...&quot;
        )

        resp = AliceAPI.EphemeraAPI(db[uid][&quot;token&quot;]).InstancePower(instance_id, action)
        if resp == False:
            sdk.SendMessage.Text(uid, &quot;user&quot;, f&quot;&#123;action&#125; Failed&quot;)
            return

        sdk.SendMessage.Text(uid, &quot;user&quot;, f&quot;Instance &#123;instance_id&#125; &#123;action&#125;ed&quot;)


def InstanceBoot(data):
    power_action(data, &quot;boot&quot;)


def InstanceShutdown(data):
    power_action(data, &quot;shutdown&quot;)


def InstanceRestart(data):
    power_action(data, &quot;restart&quot;)


def InstancePoweroff(data):
    power_action(data, &quot;poweroff&quot;)


def InstanceRebuild(data):
    event = data[&quot;event&quot;]
    if event[&quot;senderType&quot;] == &quot;user&quot;:

        db = ReadDB()
        uid = event[&quot;senderId&quot;]

        if uid not in db or &quot;token&quot; not in db[uid]:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;Set Token First&quot;)
            return

        if &quot;plan&quot; not in db[uid] or &quot;os&quot; not in db[uid]:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;Set Default Config First&quot;)
            return

        if &quot;instance_id&quot; not in db[uid] or db[uid][&quot;instance_id&quot;] == &quot;&quot;:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;No Instance Deployed&quot;)
            return

        instance_id = db[uid][&quot;instance_id&quot;]
        sdk.SendMessage.Text(uid, &quot;user&quot;, f&quot;Rebuilding Instance &#123;instance_id&#125;...&quot;)

        Ephemera = AliceAPI.EphemeraAPI(db[uid][&quot;token&quot;])
        plans = Ephemera.PlanList()
        oss = Ephemera.PlanOsList(plans[db[uid][&quot;plan&quot;]])
        resp = Ephemera.InstanceRebuild(instance_id, oss[db[uid][&quot;os&quot;]])

        if resp == False:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;Rebuild Failed&quot;)
            return

        sdk.SendMessage.Text(uid, &quot;user&quot;, f&quot;Instance &#123;instance_id&#125; Rebuilt&quot;)


def InstanceRenewal(data):
    event = data[&quot;event&quot;]
    if event[&quot;senderType&quot;] == &quot;user&quot;:

        db = ReadDB()
        uid = event[&quot;senderId&quot;]

        if uid not in db or &quot;token&quot; not in db[uid]:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;Set Token First&quot;)
            return

        if &quot;instance_id&quot; not in db[uid] or db[uid][&quot;instance_id&quot;] == &quot;&quot;:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;No Instance Deployed&quot;)
            return

        instance_id = db[uid][&quot;instance_id&quot;]
        sdk.SendMessage.Text(uid, &quot;user&quot;, f&quot;Renewing Instance &#123;instance_id&#125;...&quot;)

        target_hours = db[uid][&quot;hours&quot;]
        resp = AliceAPI.EphemeraAPI(db[uid][&quot;token&quot;]).InstanceRenewal(
            instance_id, int(target_hours)
        )
        if resp == False:
            sdk.SendMessage.Text(uid, &quot;user&quot;, &quot;Renewal Failed&quot;)
            return

        sdk.SendMessage.Text(
            uid, &quot;user&quot;, f&quot;Instance &#123;instance_id&#125; Renewed &#123;target_hours&#125; hours&quot;
        )


sdk.ServCommand.AddHandle(SetToken, Set Token 指令ID)
sdk.ServCommand.AddHandle(InstanceConfig, Default Config 指令ID)
sdk.ServShortCut.AddHandle(InstanceInfo, &quot;Info 菜单ID&quot;)
sdk.ServShortCut.AddHandle(InstanceDeploy, &quot;Deploy 菜单ID&quot;)
sdk.ServShortCut.AddHandle(InstanceDestroy, &quot;Destroy 菜单ID&quot;)
sdk.ServShortCut.AddHandle(InstanceBoot, &quot;Boot 菜单ID&quot;)
sdk.ServShortCut.AddHandle(InstanceShutdown, &quot;Shutdown 菜单ID&quot;)
sdk.ServShortCut.AddHandle(InstanceRestart, &quot;Restart 菜单ID&quot;)
sdk.ServShortCut.AddHandle(InstancePoweroff, &quot;Poweroff 菜单ID&quot;)
sdk.ServShortCut.AddHandle(InstanceRebuild, &quot;Rebuild 菜单ID&quot;)
sdk.ServShortCut.AddHandle(InstanceRenewal, &quot;Renewal 菜单ID&quot;)
sdk.Server.AddTrigger(sdk.ServCommand)
sdk.Server.AddTrigger(sdk.ServShortCut)

sdk.Server.Start()
</code></pre>
<p>启动后填入到 <code>配置消息订阅接口</code></p>

        </div>
        <!-- end post content -->

    </article>
    <!-- end article body -->

</div></div>
      </div>
      <!-- end right area -->

      <!-- footer -->
      <div id="footer" role="contentinfo">
        &copy; 2025
        <a href="/">Runoneall</a>.
        <a target="_blank" rel="noopener" href="https://github.com/runoneall/hexo-theme-old-fashion"
          >Old Fasion</a
        >
        Theme. Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>.
      </div>
      <!-- end footer -->
    </div>
    <!-- end outbox -->

    <!-- extra html -->


<!-- extra js -->

<script>
console.log(String.raw`
            ___              __
      _____<  /____ _   ____/ /___  _   __
     / ___// // __ `+ "`" + String.raw`/  / __  // _ \| | / /
    / /   / // /_/ /  / /_/ //  __/| |/ /
   /_/   /_/ \__,_/   \__,_/ \___/ |___/

LET THE UNFAIRNESS OF THE WORLD BOW BEFORE ME
`)
</script>


<!-- js dependencies -->

<script src="/js/dark.js"></script>
<script src="/js/highlight.js"></script>
<script src="/js/sidebar.js"></script>
<script src="/js/search.js"></script>


<!-- code highlight -->
<script>
    hljs.highlightAll();
</script>
  </body>
</html>
